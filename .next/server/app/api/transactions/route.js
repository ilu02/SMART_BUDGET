"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/transactions/route";
exports.ids = ["app/api/transactions/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftransactions%2Froute&page=%2Fapi%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftransactions%2Froute&page=%2Fapi%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_USER_Desktop_smart_project2_app_api_transactions_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/transactions/route.js */ \"(rsc)/./app/api/transactions/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/transactions/route\",\n        pathname: \"/api/transactions\",\n        filename: \"route\",\n        bundlePath: \"app/api/transactions/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\USER\\\\Desktop\\\\smart_project2\\\\app\\\\api\\\\transactions\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_USER_Desktop_smart_project2_app_api_transactions_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/transactions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0cmFuc2FjdGlvbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRyYW5zYWN0aW9ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRyYW5zYWN0aW9ucyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVU0VSJTVDRGVza3RvcCU1Q3NtYXJ0X3Byb2plY3QyJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNVU0VSJTVDRGVza3RvcCU1Q3NtYXJ0X3Byb2plY3QyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQjtBQUN2RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWJ1ZGdldC1hcHAvP2NhYzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcVVNFUlxcXFxEZXNrdG9wXFxcXHNtYXJ0X3Byb2plY3QyXFxcXGFwcFxcXFxhcGlcXFxcdHJhbnNhY3Rpb25zXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90cmFuc2FjdGlvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90cmFuc2FjdGlvbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RyYW5zYWN0aW9ucy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVTRVJcXFxcRGVza3RvcFxcXFxzbWFydF9wcm9qZWN0MlxcXFxhcHBcXFxcYXBpXFxcXHRyYW5zYWN0aW9uc1xcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdHJhbnNhY3Rpb25zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftransactions%2Froute&page=%2Fapi%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/transactions/route.js":
/*!***************************************!*\
  !*** ./app/api/transactions/route.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/database.js */ \"(rsc)/./lib/database.js\");\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get(\"userId\");\n        const budgetId = searchParams.get(\"budgetId\");\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const transactions = await (0,_lib_database_js__WEBPACK_IMPORTED_MODULE_1__.getUserTransactions)(userId, budgetId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            transactions\n        });\n    } catch (error) {\n        console.error(\"Get transactions error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const { userId, ...transactionData } = await request.json();\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!transactionData.amount || !transactionData.description || !transactionData.category || !transactionData.type) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Amount, description, category, and type are required\"\n            }, {\n                status: 400\n            });\n        }\n        const transaction = await (0,_lib_database_js__WEBPACK_IMPORTED_MODULE_1__.addTransaction)(userId, transactionData);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            transaction\n        });\n    } catch (error) {\n        console.error(\"Add transaction error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        const { id, ...transactionData } = await request.json();\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Transaction ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const transaction = await (0,_lib_database_js__WEBPACK_IMPORTED_MODULE_1__.updateTransaction)(id, transactionData);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            transaction\n        });\n    } catch (error) {\n        console.error(\"Update transaction error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const id = searchParams.get(\"id\");\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Transaction ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        await (0,_lib_database_js__WEBPACK_IMPORTED_MODULE_1__.deleteTransaction)(id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Transaction deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Delete transaction error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTtZQUNQLE9BQU81QixxREFBWUEsQ0FBQ2MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE2QixHQUN0QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTVosbUVBQWlCQSxDQUFDd0I7UUFFeEIsT0FBTzVCLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFDdkJJLFNBQVM7WUFDVFksU0FBUztRQUNYO0lBRUYsRUFBRSxPQUFPZixPQUFPO1FBQ2RJLFFBQVFKLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9mLHFEQUFZQSxDQUFDYyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFydC1idWRnZXQtYXBwLy4vYXBwL2FwaS90cmFuc2FjdGlvbnMvcm91dGUuanM/NjhlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGdldFVzZXJUcmFuc2FjdGlvbnMsIGFkZFRyYW5zYWN0aW9uLCB1cGRhdGVUcmFuc2FjdGlvbiwgZGVsZXRlVHJhbnNhY3Rpb24sIHVwZGF0ZUJ1ZGdldFNwZW50IH0gZnJvbSAnLi4vLi4vLi4vbGliL2RhdGFiYXNlLmpzJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XHJcbiAgICBjb25zdCB1c2VySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTtcclxuICAgIGNvbnN0IGJ1ZGdldElkID0gc2VhcmNoUGFyYW1zLmdldCgnYnVkZ2V0SWQnKTtcclxuXHJcbiAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZ2V0VXNlclRyYW5zYWN0aW9ucyh1c2VySWQsIGJ1ZGdldElkKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB0cmFuc2FjdGlvbnNcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignR2V0IHRyYW5zYWN0aW9ucyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB1c2VySWQsIC4uLnRyYW5zYWN0aW9uRGF0YSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcblxyXG4gICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdHJhbnNhY3Rpb25EYXRhLmFtb3VudCB8fCAhdHJhbnNhY3Rpb25EYXRhLmRlc2NyaXB0aW9uIHx8ICF0cmFuc2FjdGlvbkRhdGEuY2F0ZWdvcnkgfHwgIXRyYW5zYWN0aW9uRGF0YS50eXBlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnQW1vdW50LCBkZXNjcmlwdGlvbiwgY2F0ZWdvcnksIGFuZCB0eXBlIGFyZSByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFkZFRyYW5zYWN0aW9uKHVzZXJJZCwgdHJhbnNhY3Rpb25EYXRhKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB0cmFuc2FjdGlvblxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBZGQgdHJhbnNhY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCwgLi4udHJhbnNhY3Rpb25EYXRhIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICBpZiAoIWlkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVHJhbnNhY3Rpb24gSUQgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCB1cGRhdGVUcmFuc2FjdGlvbihpZCwgdHJhbnNhY3Rpb25EYXRhKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB0cmFuc2FjdGlvblxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVcGRhdGUgdHJhbnNhY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgaWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xyXG5cclxuICAgIGlmICghaWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdUcmFuc2FjdGlvbiBJRCBpcyByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBkZWxldGVUcmFuc2FjdGlvbihpZCk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ1RyYW5zYWN0aW9uIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5J1xyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEZWxldGUgdHJhbnNhY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFVzZXJUcmFuc2FjdGlvbnMiLCJhZGRUcmFuc2FjdGlvbiIsInVwZGF0ZVRyYW5zYWN0aW9uIiwiZGVsZXRlVHJhbnNhY3Rpb24iLCJ1cGRhdGVCdWRnZXRTcGVudCIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ1c2VySWQiLCJnZXQiLCJidWRnZXRJZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInRyYW5zYWN0aW9ucyIsInN1Y2Nlc3MiLCJjb25zb2xlIiwiUE9TVCIsInRyYW5zYWN0aW9uRGF0YSIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJ0eXBlIiwidHJhbnNhY3Rpb24iLCJQVVQiLCJpZCIsIkRFTEVURSIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/transactions/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEMO_BUDGETS: () => (/* binding */ DEMO_BUDGETS),\n/* harmony export */   DEMO_CREDENTIALS: () => (/* binding */ DEMO_CREDENTIALS),\n/* harmony export */   DEMO_TRANSACTIONS: () => (/* binding */ DEMO_TRANSACTIONS),\n/* harmony export */   addBudget: () => (/* binding */ addBudget),\n/* harmony export */   addTransaction: () => (/* binding */ addTransaction),\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   createOrGetDemoUser: () => (/* binding */ createOrGetDemoUser),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteBudget: () => (/* binding */ deleteBudget),\n/* harmony export */   deleteTransaction: () => (/* binding */ deleteTransaction),\n/* harmony export */   getBudgetWithTransactions: () => (/* binding */ getBudgetWithTransactions),\n/* harmony export */   getUserBudgets: () => (/* binding */ getUserBudgets),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserTransactions: () => (/* binding */ getUserTransactions),\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   resetDemoData: () => (/* binding */ resetDemoData),\n/* harmony export */   seedDemoData: () => (/* binding */ seedDemoData),\n/* harmony export */   updateBudget: () => (/* binding */ updateBudget),\n/* harmony export */   updateBudgetSpent: () => (/* binding */ updateBudgetSpent),\n/* harmony export */   updateTransaction: () => (/* binding */ updateTransaction),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n// Demo account credentials\nconst DEMO_CREDENTIALS = {\n    email: \"demo@example.com\",\n    password: \"password123\",\n    name: \"Demo User\"\n};\n// Demo data for the demo account\nconst DEMO_TRANSACTIONS = [\n    {\n        amount: 3200,\n        description: \"Monthly Salary\",\n        category: \"Salary\",\n        type: \"income\",\n        date: new Date(\"2024-08-01\")\n    },\n    {\n        amount: 1200,\n        description: \"Freelance Project\",\n        category: \"Freelance\",\n        type: \"income\",\n        date: new Date(\"2024-08-15\")\n    },\n    {\n        amount: 850,\n        description: \"Rent Payment\",\n        category: \"Housing\",\n        type: \"expense\",\n        date: new Date(\"2024-08-01\")\n    },\n    {\n        amount: 320,\n        description: \"Grocery Shopping\",\n        category: \"Food & Dining\",\n        type: \"expense\",\n        date: new Date(\"2024-08-05\")\n    },\n    {\n        amount: 45,\n        description: \"Gas Station\",\n        category: \"Transportation\",\n        type: \"expense\",\n        date: new Date(\"2024-08-10\")\n    },\n    {\n        amount: 89,\n        description: \"Movie Night\",\n        category: \"Entertainment\",\n        type: \"expense\",\n        date: new Date(\"2024-08-12\")\n    },\n    {\n        amount: 156,\n        description: \"Online Shopping\",\n        category: \"Shopping\",\n        type: \"expense\",\n        date: new Date(\"2024-08-18\")\n    },\n    {\n        amount: 75,\n        description: \"Gym Membership\",\n        category: \"Health & Fitness\",\n        type: \"expense\",\n        date: new Date(\"2024-08-20\")\n    }\n];\nconst DEMO_BUDGETS = [\n    {\n        category: \"Food & Dining\",\n        budget: 800,\n        spent: 567,\n        icon: \"ri-restaurant-line\",\n        color: \"bg-blue-500\",\n        description: \"Restaurants, groceries, and food delivery\"\n    },\n    {\n        category: \"Transportation\",\n        budget: 400,\n        spent: 285,\n        icon: \"ri-gas-station-line\",\n        color: \"bg-teal-500\",\n        description: \"Gas, public transport, and ride-sharing\"\n    },\n    {\n        category: \"Entertainment\",\n        budget: 200,\n        spent: 178,\n        icon: \"ri-film-line\",\n        color: \"bg-pink-500\",\n        description: \"Movies, games, and leisure activities\"\n    },\n    {\n        category: \"Shopping\",\n        budget: 600,\n        spent: 432,\n        icon: \"ri-shopping-bag-line\",\n        color: \"bg-red-500\",\n        description: \"Clothes, electronics, and general shopping\"\n    },\n    {\n        category: \"Health & Fitness\",\n        budget: 150,\n        spent: 99,\n        icon: \"ri-heart-pulse-line\",\n        color: \"bg-orange-500\",\n        description: \"Gym, supplements, and medical expenses\"\n    },\n    {\n        category: \"Utilities\",\n        budget: 250,\n        spent: 234,\n        icon: \"ri-flashlight-line\",\n        color: \"bg-yellow-500\",\n        description: \"Electricity, water, internet, and phone\"\n    },\n    {\n        category: \"Education\",\n        budget: 300,\n        spent: 165,\n        icon: \"ri-book-line\",\n        color: \"bg-indigo-500\",\n        description: \"Courses, books, and learning materials\"\n    },\n    {\n        category: \"Travel\",\n        budget: 500,\n        spent: 0,\n        icon: \"ri-plane-line\",\n        color: \"bg-purple-500\",\n        description: \"Flights, hotels, and vacation expenses\"\n    }\n];\n// Create or get the demo user\nasync function createOrGetDemoUser() {\n    try {\n        // Check if demo user already exists\n        let demoUser = await prisma.user.findUnique({\n            where: {\n                email: DEMO_CREDENTIALS.email\n            }\n        });\n        if (!demoUser) {\n            // Hash the password\n            const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(DEMO_CREDENTIALS.password, 12);\n            // Create the demo user\n            demoUser = await prisma.user.create({\n                data: {\n                    email: DEMO_CREDENTIALS.email,\n                    password: hashedPassword,\n                    name: DEMO_CREDENTIALS.name,\n                    isDemo: true\n                }\n            });\n            console.log(\"Demo user created successfully\");\n        }\n        return demoUser;\n    } catch (error) {\n        console.error(\"Error creating demo user:\", error);\n        throw error;\n    }\n}\n// Seed demo data for the demo user\nasync function seedDemoData() {\n    try {\n        const demoUser = await createOrGetDemoUser();\n        // Check if demo data already exists\n        const existingTransactions = await prisma.transaction.count({\n            where: {\n                userId: demoUser.id\n            }\n        });\n        const existingBudgets = await prisma.budget.count({\n            where: {\n                userId: demoUser.id\n            }\n        });\n        // Only seed if no data exists\n        if (existingTransactions === 0) {\n            await prisma.transaction.createMany({\n                data: DEMO_TRANSACTIONS.map((transaction)=>({\n                        ...transaction,\n                        userId: demoUser.id\n                    }))\n            });\n            console.log(\"Demo transactions seeded successfully\");\n        }\n        if (existingBudgets === 0) {\n            await prisma.budget.createMany({\n                data: DEMO_BUDGETS.map((budget)=>({\n                        ...budget,\n                        userId: demoUser.id\n                    }))\n            });\n            console.log(\"Demo budgets seeded successfully\");\n        }\n        return demoUser;\n    } catch (error) {\n        console.error(\"Error seeding demo data:\", error);\n        throw error;\n    }\n}\n// Reset demo data (useful for testing)\nasync function resetDemoData() {\n    try {\n        const demoUser = await prisma.user.findUnique({\n            where: {\n                email: DEMO_CREDENTIALS.email\n            }\n        });\n        if (demoUser) {\n            // Delete existing demo data\n            await prisma.transaction.deleteMany({\n                where: {\n                    userId: demoUser.id\n                }\n            });\n            await prisma.budget.deleteMany({\n                where: {\n                    userId: demoUser.id\n                }\n            });\n            // Re-seed demo data\n            await seedDemoData();\n            console.log(\"Demo data reset successfully\");\n        }\n    } catch (error) {\n        console.error(\"Error resetting demo data:\", error);\n        throw error;\n    }\n}\n// Authenticate user\nasync function authenticateUser(email, password) {\n    try {\n        const user = await prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (!user) {\n            return null;\n        }\n        const isValidPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(password, user.password);\n        if (!isValidPassword) {\n            return null;\n        }\n        // Return user without password\n        const { password: _, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error authenticating user:\", error);\n        throw error;\n    }\n}\n// Create a new user\nasync function createUser(email, password, name) {\n    try {\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 12);\n        const user = await prisma.user.create({\n            data: {\n                email,\n                password: hashedPassword,\n                name,\n                isDemo: false\n            }\n        });\n        // Return user without password\n        const { password: _, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error creating user:\", error);\n        throw error;\n    }\n}\n// Get user by ID\nasync function getUserById(id) {\n    try {\n        const user = await prisma.user.findUnique({\n            where: {\n                id\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                avatar: true,\n                isDemo: true,\n                createdAt: true,\n                updatedAt: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error(\"Error getting user by ID:\", error);\n        throw error;\n    }\n}\n// Get user transactions\nasync function getUserTransactions(userId, budgetId = null) {\n    try {\n        const whereClause = {\n            userId\n        };\n        // If budgetId is provided, filter by budget\n        if (budgetId) {\n            whereClause.budgetId = budgetId;\n        }\n        const transactions = await prisma.transaction.findMany({\n            where: whereClause,\n            include: {\n                budget: {\n                    select: {\n                        id: true,\n                        category: true,\n                        icon: true,\n                        color: true\n                    }\n                }\n            },\n            orderBy: {\n                date: \"desc\"\n            }\n        });\n        return transactions;\n    } catch (error) {\n        console.error(\"Error getting user transactions:\", error);\n        throw error;\n    }\n}\n// Get user budgets with calculated spent amounts\nasync function getUserBudgets(userId) {\n    try {\n        const budgets = await prisma.budget.findMany({\n            where: {\n                userId\n            },\n            include: {\n                transactions: {\n                    where: {\n                        type: \"expense\"\n                    }\n                }\n            },\n            orderBy: {\n                category: \"asc\"\n            }\n        });\n        // Calculate spent amount for each budget from related transactions\n        const budgetsWithSpent = budgets.map((budget)=>{\n            const spent = budget.transactions.reduce((sum, transaction)=>{\n                return sum + Math.abs(transaction.amount);\n            }, 0);\n            return {\n                ...budget,\n                spent,\n                transactionCount: budget.transactions.length,\n                // Remove transactions from the response to keep it clean\n                transactions: undefined\n            };\n        });\n        return budgetsWithSpent;\n    } catch (error) {\n        console.error(\"Error getting user budgets:\", error);\n        throw error;\n    }\n}\n// Get a specific budget with its transactions\nasync function getBudgetWithTransactions(userId, budgetId) {\n    try {\n        const budget = await prisma.budget.findFirst({\n            where: {\n                id: budgetId,\n                userId\n            },\n            include: {\n                transactions: {\n                    orderBy: {\n                        date: \"desc\"\n                    }\n                }\n            }\n        });\n        if (!budget) {\n            return null;\n        }\n        // Calculate spent amount\n        const spent = budget.transactions.filter((t)=>t.type === \"expense\").reduce((sum, transaction)=>sum + Math.abs(transaction.amount), 0);\n        return {\n            ...budget,\n            spent,\n            transactionCount: budget.transactions.length\n        };\n    } catch (error) {\n        console.error(\"Error getting budget with transactions:\", error);\n        throw error;\n    }\n}\n// Add transaction\nasync function addTransaction(userId, transactionData) {\n    try {\n        // Extract only the fields that exist in the database schema\n        const { description, category, amount, date, type, budgetId } = transactionData;\n        // Find budget by category if budgetId is not provided but category matches\n        let finalBudgetId = budgetId;\n        if (!finalBudgetId && type === \"expense\") {\n            const budget = await prisma.budget.findFirst({\n                where: {\n                    userId,\n                    category\n                }\n            });\n            finalBudgetId = budget?.id;\n        }\n        const transaction = await prisma.transaction.create({\n            data: {\n                description,\n                category,\n                amount,\n                type,\n                date: new Date(date),\n                userId,\n                budgetId: finalBudgetId\n            }\n        });\n        // Update budget spent amount if this is an expense with a budget\n        if (type === \"expense\" && finalBudgetId) {\n            await updateBudgetSpent(finalBudgetId);\n        }\n        return transaction;\n    } catch (error) {\n        console.error(\"Error adding transaction:\", error);\n        throw error;\n    }\n}\n// Add budget\nasync function addBudget(userId, budgetData) {\n    try {\n        const budget = await prisma.budget.create({\n            data: {\n                ...budgetData,\n                userId\n            }\n        });\n        return budget;\n    } catch (error) {\n        console.error(\"Error adding budget:\", error);\n        throw error;\n    }\n}\n// Update budget\nasync function updateBudget(budgetId, budgetData) {\n    try {\n        const budget = await prisma.budget.update({\n            where: {\n                id: budgetId\n            },\n            data: budgetData\n        });\n        return budget;\n    } catch (error) {\n        console.error(\"Error updating budget:\", error);\n        throw error;\n    }\n}\n// Update transaction\nasync function updateTransaction(transactionId, transactionData) {\n    try {\n        // Get the original transaction to check if budget changed\n        const originalTransaction = await prisma.transaction.findUnique({\n            where: {\n                id: transactionId\n            }\n        });\n        const transaction = await prisma.transaction.update({\n            where: {\n                id: transactionId\n            },\n            data: transactionData\n        });\n        // Update budget spent amounts for affected budgets\n        if (originalTransaction?.budgetId && originalTransaction.type === \"expense\") {\n            await updateBudgetSpent(originalTransaction.budgetId);\n        }\n        if (transaction.budgetId && transaction.type === \"expense\" && transaction.budgetId !== originalTransaction?.budgetId) {\n            await updateBudgetSpent(transaction.budgetId);\n        }\n        return transaction;\n    } catch (error) {\n        console.error(\"Error updating transaction:\", error);\n        throw error;\n    }\n}\n// Delete transaction\nasync function deleteTransaction(transactionId) {\n    try {\n        // Get the transaction before deleting to update budget\n        const transaction = await prisma.transaction.findUnique({\n            where: {\n                id: transactionId\n            }\n        });\n        await prisma.transaction.delete({\n            where: {\n                id: transactionId\n            }\n        });\n        // Update budget spent amount if this was an expense with a budget\n        if (transaction?.budgetId && transaction.type === \"expense\") {\n            await updateBudgetSpent(transaction.budgetId);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Error deleting transaction:\", error);\n        throw error;\n    }\n}\n// Delete budget\nasync function deleteBudget(budgetId) {\n    try {\n        await prisma.budget.delete({\n            where: {\n                id: budgetId\n            }\n        });\n        return true;\n    } catch (error) {\n        console.error(\"Error deleting budget:\", error);\n        throw error;\n    }\n}\n// Update budget spent amount\nasync function updateBudgetSpent(budgetId) {\n    try {\n        // Calculate total spent for this budget from transactions\n        const transactions = await prisma.transaction.findMany({\n            where: {\n                budgetId: budgetId,\n                type: \"expense\"\n            }\n        });\n        const totalSpent = transactions.reduce((sum, transaction)=>{\n            return sum + Math.abs(transaction.amount);\n        }, 0);\n        // Update the budget with the calculated spent amount\n        const budget = await prisma.budget.update({\n            where: {\n                id: budgetId\n            },\n            data: {\n                spent: totalSpent\n            }\n        });\n        return budget;\n    } catch (error) {\n        console.error(\"Error updating budget spent:\", error);\n        throw error;\n    }\n}\n// Update user profile\nasync function updateUserProfile(userId, profileData) {\n    try {\n        const user = await prisma.user.update({\n            where: {\n                id: userId\n            },\n            data: {\n                name: profileData.name,\n                email: profileData.email,\n                avatar: profileData.avatar\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error(\"Error updating user profile:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUk7UUFDRixNQUFNdEUsT0FBTyxNQUFNcEIsT0FBT29CLElBQUksQ0FBQzZELE1BQU0sQ0FBQztZQUNwQzNELE9BQU87Z0JBQUVjLElBQUlEO1lBQU87WUFDcEJULE1BQU07Z0JBQ0pyQixNQUFNcUYsWUFBWXJGLElBQUk7Z0JBQ3RCRixPQUFPdUYsWUFBWXZGLEtBQUs7Z0JBQ3hCK0MsUUFBUXdDLFlBQVl4QyxNQUFNO1lBRzVCO1FBQ0Y7UUFFQSxPQUFPOUI7SUFDVCxFQUFFLE9BQU9VLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hcnQtYnVkZ2V0LWFwcC8uL2xpYi9kYXRhYmFzZS5qcz9lZWE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcblxyXG4vLyBEZW1vIGFjY291bnQgY3JlZGVudGlhbHNcclxuZXhwb3J0IGNvbnN0IERFTU9fQ1JFREVOVElBTFMgPSB7XHJcbiAgZW1haWw6ICdkZW1vQGV4YW1wbGUuY29tJyxcclxuICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJyxcclxuICBuYW1lOiAnRGVtbyBVc2VyJ1xyXG59O1xyXG5cclxuLy8gRGVtbyBkYXRhIGZvciB0aGUgZGVtbyBhY2NvdW50XHJcbmV4cG9ydCBjb25zdCBERU1PX1RSQU5TQUNUSU9OUyA9IFtcclxuICB7XHJcbiAgICBhbW91bnQ6IDMyMDAsXHJcbiAgICBkZXNjcmlwdGlvbjogJ01vbnRobHkgU2FsYXJ5JyxcclxuICAgIGNhdGVnb3J5OiAnU2FsYXJ5JyxcclxuICAgIHR5cGU6ICdpbmNvbWUnLFxyXG4gICAgZGF0ZTogbmV3IERhdGUoJzIwMjQtMDgtMDEnKVxyXG4gIH0sXHJcbiAge1xyXG4gICAgYW1vdW50OiAxMjAwLFxyXG4gICAgZGVzY3JpcHRpb246ICdGcmVlbGFuY2UgUHJvamVjdCcsXHJcbiAgICBjYXRlZ29yeTogJ0ZyZWVsYW5jZScsXHJcbiAgICB0eXBlOiAnaW5jb21lJyxcclxuICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI0LTA4LTE1JylcclxuICB9LFxyXG4gIHtcclxuICAgIGFtb3VudDogODUwLFxyXG4gICAgZGVzY3JpcHRpb246ICdSZW50IFBheW1lbnQnLFxyXG4gICAgY2F0ZWdvcnk6ICdIb3VzaW5nJyxcclxuICAgIHR5cGU6ICdleHBlbnNlJyxcclxuICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI0LTA4LTAxJylcclxuICB9LFxyXG4gIHtcclxuICAgIGFtb3VudDogMzIwLFxyXG4gICAgZGVzY3JpcHRpb246ICdHcm9jZXJ5IFNob3BwaW5nJyxcclxuICAgIGNhdGVnb3J5OiAnRm9vZCAmIERpbmluZycsXHJcbiAgICB0eXBlOiAnZXhwZW5zZScsXHJcbiAgICBkYXRlOiBuZXcgRGF0ZSgnMjAyNC0wOC0wNScpXHJcbiAgfSxcclxuICB7XHJcbiAgICBhbW91bnQ6IDQ1LFxyXG4gICAgZGVzY3JpcHRpb246ICdHYXMgU3RhdGlvbicsXHJcbiAgICBjYXRlZ29yeTogJ1RyYW5zcG9ydGF0aW9uJyxcclxuICAgIHR5cGU6ICdleHBlbnNlJyxcclxuICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI0LTA4LTEwJylcclxuICB9LFxyXG4gIHtcclxuICAgIGFtb3VudDogODksXHJcbiAgICBkZXNjcmlwdGlvbjogJ01vdmllIE5pZ2h0JyxcclxuICAgIGNhdGVnb3J5OiAnRW50ZXJ0YWlubWVudCcsXHJcbiAgICB0eXBlOiAnZXhwZW5zZScsXHJcbiAgICBkYXRlOiBuZXcgRGF0ZSgnMjAyNC0wOC0xMicpXHJcbiAgfSxcclxuICB7XHJcbiAgICBhbW91bnQ6IDE1NixcclxuICAgIGRlc2NyaXB0aW9uOiAnT25saW5lIFNob3BwaW5nJyxcclxuICAgIGNhdGVnb3J5OiAnU2hvcHBpbmcnLFxyXG4gICAgdHlwZTogJ2V4cGVuc2UnLFxyXG4gICAgZGF0ZTogbmV3IERhdGUoJzIwMjQtMDgtMTgnKVxyXG4gIH0sXHJcbiAge1xyXG4gICAgYW1vdW50OiA3NSxcclxuICAgIGRlc2NyaXB0aW9uOiAnR3ltIE1lbWJlcnNoaXAnLFxyXG4gICAgY2F0ZWdvcnk6ICdIZWFsdGggJiBGaXRuZXNzJyxcclxuICAgIHR5cGU6ICdleHBlbnNlJyxcclxuICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI0LTA4LTIwJylcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgREVNT19CVURHRVRTID0gW1xyXG4gIHtcclxuICAgIGNhdGVnb3J5OiAnRm9vZCAmIERpbmluZycsXHJcbiAgICBidWRnZXQ6IDgwMCxcclxuICAgIHNwZW50OiA1NjcsXHJcbiAgICBpY29uOiAncmktcmVzdGF1cmFudC1saW5lJyxcclxuICAgIGNvbG9yOiAnYmctYmx1ZS01MDAnLFxyXG4gICAgZGVzY3JpcHRpb246ICdSZXN0YXVyYW50cywgZ3JvY2VyaWVzLCBhbmQgZm9vZCBkZWxpdmVyeSdcclxuICB9LFxyXG4gIHtcclxuICAgIGNhdGVnb3J5OiAnVHJhbnNwb3J0YXRpb24nLFxyXG4gICAgYnVkZ2V0OiA0MDAsXHJcbiAgICBzcGVudDogMjg1LFxyXG4gICAgaWNvbjogJ3JpLWdhcy1zdGF0aW9uLWxpbmUnLFxyXG4gICAgY29sb3I6ICdiZy10ZWFsLTUwMCcsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0dhcywgcHVibGljIHRyYW5zcG9ydCwgYW5kIHJpZGUtc2hhcmluZydcclxuICB9LFxyXG4gIHtcclxuICAgIGNhdGVnb3J5OiAnRW50ZXJ0YWlubWVudCcsXHJcbiAgICBidWRnZXQ6IDIwMCxcclxuICAgIHNwZW50OiAxNzgsXHJcbiAgICBpY29uOiAncmktZmlsbS1saW5lJyxcclxuICAgIGNvbG9yOiAnYmctcGluay01MDAnLFxyXG4gICAgZGVzY3JpcHRpb246ICdNb3ZpZXMsIGdhbWVzLCBhbmQgbGVpc3VyZSBhY3Rpdml0aWVzJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgY2F0ZWdvcnk6ICdTaG9wcGluZycsXHJcbiAgICBidWRnZXQ6IDYwMCxcclxuICAgIHNwZW50OiA0MzIsXHJcbiAgICBpY29uOiAncmktc2hvcHBpbmctYmFnLWxpbmUnLFxyXG4gICAgY29sb3I6ICdiZy1yZWQtNTAwJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnQ2xvdGhlcywgZWxlY3Ryb25pY3MsIGFuZCBnZW5lcmFsIHNob3BwaW5nJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgY2F0ZWdvcnk6ICdIZWFsdGggJiBGaXRuZXNzJyxcclxuICAgIGJ1ZGdldDogMTUwLFxyXG4gICAgc3BlbnQ6IDk5LFxyXG4gICAgaWNvbjogJ3JpLWhlYXJ0LXB1bHNlLWxpbmUnLFxyXG4gICAgY29sb3I6ICdiZy1vcmFuZ2UtNTAwJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnR3ltLCBzdXBwbGVtZW50cywgYW5kIG1lZGljYWwgZXhwZW5zZXMnXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXRlZ29yeTogJ1V0aWxpdGllcycsXHJcbiAgICBidWRnZXQ6IDI1MCxcclxuICAgIHNwZW50OiAyMzQsXHJcbiAgICBpY29uOiAncmktZmxhc2hsaWdodC1saW5lJyxcclxuICAgIGNvbG9yOiAnYmcteWVsbG93LTUwMCcsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0VsZWN0cmljaXR5LCB3YXRlciwgaW50ZXJuZXQsIGFuZCBwaG9uZSdcclxuICB9LFxyXG4gIHtcclxuICAgIGNhdGVnb3J5OiAnRWR1Y2F0aW9uJyxcclxuICAgIGJ1ZGdldDogMzAwLFxyXG4gICAgc3BlbnQ6IDE2NSxcclxuICAgIGljb246ICdyaS1ib29rLWxpbmUnLFxyXG4gICAgY29sb3I6ICdiZy1pbmRpZ28tNTAwJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnQ291cnNlcywgYm9va3MsIGFuZCBsZWFybmluZyBtYXRlcmlhbHMnXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXRlZ29yeTogJ1RyYXZlbCcsXHJcbiAgICBidWRnZXQ6IDUwMCxcclxuICAgIHNwZW50OiAwLFxyXG4gICAgaWNvbjogJ3JpLXBsYW5lLWxpbmUnLFxyXG4gICAgY29sb3I6ICdiZy1wdXJwbGUtNTAwJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnRmxpZ2h0cywgaG90ZWxzLCBhbmQgdmFjYXRpb24gZXhwZW5zZXMnXHJcbiAgfVxyXG5dO1xyXG5cclxuLy8gQ3JlYXRlIG9yIGdldCB0aGUgZGVtbyB1c2VyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPckdldERlbW9Vc2VyKCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBpZiBkZW1vIHVzZXIgYWxyZWFkeSBleGlzdHNcclxuICAgIGxldCBkZW1vVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBlbWFpbDogREVNT19DUkVERU5USUFMUy5lbWFpbCB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIWRlbW9Vc2VyKSB7XHJcbiAgICAgIC8vIEhhc2ggdGhlIHBhc3N3b3JkXHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goREVNT19DUkVERU5USUFMUy5wYXNzd29yZCwgMTIpO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIHRoZSBkZW1vIHVzZXJcclxuICAgICAgZGVtb1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGVtYWlsOiBERU1PX0NSRURFTlRJQUxTLmVtYWlsLFxyXG4gICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgbmFtZTogREVNT19DUkVERU5USUFMUy5uYW1lLFxyXG4gICAgICAgICAgaXNEZW1vOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZW1vIHVzZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGVtb1VzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGRlbW8gdXNlcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIFNlZWQgZGVtbyBkYXRhIGZvciB0aGUgZGVtbyB1c2VyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWVkRGVtb0RhdGEoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlbW9Vc2VyID0gYXdhaXQgY3JlYXRlT3JHZXREZW1vVXNlcigpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIGRlbW8gZGF0YSBhbHJlYWR5IGV4aXN0c1xyXG4gICAgY29uc3QgZXhpc3RpbmdUcmFuc2FjdGlvbnMgPSBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICB3aGVyZTogeyB1c2VySWQ6IGRlbW9Vc2VyLmlkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nQnVkZ2V0cyA9IGF3YWl0IHByaXNtYS5idWRnZXQuY291bnQoe1xyXG4gICAgICB3aGVyZTogeyB1c2VySWQ6IGRlbW9Vc2VyLmlkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9ubHkgc2VlZCBpZiBubyBkYXRhIGV4aXN0c1xyXG4gICAgaWYgKGV4aXN0aW5nVHJhbnNhY3Rpb25zID09PSAwKSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGVNYW55KHtcclxuICAgICAgICBkYXRhOiBERU1PX1RSQU5TQUNUSU9OUy5tYXAodHJhbnNhY3Rpb24gPT4gKHtcclxuICAgICAgICAgIC4uLnRyYW5zYWN0aW9uLFxyXG4gICAgICAgICAgdXNlcklkOiBkZW1vVXNlci5pZFxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc29sZS5sb2coJ0RlbW8gdHJhbnNhY3Rpb25zIHNlZWRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXhpc3RpbmdCdWRnZXRzID09PSAwKSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS5idWRnZXQuY3JlYXRlTWFueSh7XHJcbiAgICAgICAgZGF0YTogREVNT19CVURHRVRTLm1hcChidWRnZXQgPT4gKHtcclxuICAgICAgICAgIC4uLmJ1ZGdldCxcclxuICAgICAgICAgIHVzZXJJZDogZGVtb1VzZXIuaWRcclxuICAgICAgICB9KSlcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZW1vIGJ1ZGdldHMgc2VlZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZW1vVXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VlZGluZyBkZW1vIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBSZXNldCBkZW1vIGRhdGEgKHVzZWZ1bCBmb3IgdGVzdGluZylcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0RGVtb0RhdGEoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlbW9Vc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiBERU1PX0NSRURFTlRJQUxTLmVtYWlsIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChkZW1vVXNlcikge1xyXG4gICAgICAvLyBEZWxldGUgZXhpc3RpbmcgZGVtbyBkYXRhXHJcbiAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5kZWxldGVNYW55KHtcclxuICAgICAgICB3aGVyZTogeyB1c2VySWQ6IGRlbW9Vc2VyLmlkIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBwcmlzbWEuYnVkZ2V0LmRlbGV0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogZGVtb1VzZXIuaWQgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFJlLXNlZWQgZGVtbyBkYXRhXHJcbiAgICAgIGF3YWl0IHNlZWREZW1vRGF0YSgpO1xyXG4gICAgICBjb25zb2xlLmxvZygnRGVtbyBkYXRhIHJlc2V0IHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXNldHRpbmcgZGVtbyBkYXRhOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQXV0aGVudGljYXRlIHVzZXJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgZW1haWwgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlzVmFsaWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcclxuICAgIGlmICghaXNWYWxpZFBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB1c2VyIHdpdGhvdXQgcGFzc3dvcmRcclxuICAgIGNvbnN0IHsgcGFzc3dvcmQ6IF8sIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XHJcbiAgICByZXR1cm4gdXNlcldpdGhvdXRQYXNzd29yZDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYXV0aGVudGljYXRpbmcgdXNlcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIENyZWF0ZSBhIG5ldyB1c2VyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKGVtYWlsLCBwYXNzd29yZCwgbmFtZSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMik7XHJcbiAgICBcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgaXNEZW1vOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkXHJcbiAgICBjb25zdCB7IHBhc3N3b3JkOiBfLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xyXG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgdXNlciBieSBJRFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5SWQoaWQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIGF2YXRhcjogdHJ1ZSxcclxuICAgICAgICBpc0RlbW86IHRydWUsXHJcbiAgICAgICAgY3JlYXRlZEF0OiB0cnVlLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IHVzZXIgdHJhbnNhY3Rpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyVHJhbnNhY3Rpb25zKHVzZXJJZCwgYnVkZ2V0SWQgPSBudWxsKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHdoZXJlQ2xhdXNlID0geyB1c2VySWQgfTtcclxuICAgIFxyXG4gICAgLy8gSWYgYnVkZ2V0SWQgaXMgcHJvdmlkZWQsIGZpbHRlciBieSBidWRnZXRcclxuICAgIGlmIChidWRnZXRJZCkge1xyXG4gICAgICB3aGVyZUNsYXVzZS5idWRnZXRJZCA9IGJ1ZGdldElkO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZTogd2hlcmVDbGF1c2UsXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBidWRnZXQ6IHtcclxuICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IHRydWUsXHJcbiAgICAgICAgICAgIGljb246IHRydWUsXHJcbiAgICAgICAgICAgIGNvbG9yOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdHJhbnNhY3Rpb25zO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgdHJhbnNhY3Rpb25zOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IHVzZXIgYnVkZ2V0cyB3aXRoIGNhbGN1bGF0ZWQgc3BlbnQgYW1vdW50c1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ1ZGdldHModXNlcklkKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJ1ZGdldHMgPSBhd2FpdCBwcmlzbWEuYnVkZ2V0LmZpbmRNYW55KHtcclxuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdleHBlbnNlJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgb3JkZXJCeTogeyBjYXRlZ29yeTogJ2FzYycgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHNwZW50IGFtb3VudCBmb3IgZWFjaCBidWRnZXQgZnJvbSByZWxhdGVkIHRyYW5zYWN0aW9uc1xyXG4gICAgY29uc3QgYnVkZ2V0c1dpdGhTcGVudCA9IGJ1ZGdldHMubWFwKChidWRnZXQpID0+IHtcclxuICAgICAgY29uc3Qgc3BlbnQgPSBidWRnZXQudHJhbnNhY3Rpb25zLnJlZHVjZSgoc3VtLCB0cmFuc2FjdGlvbikgPT4ge1xyXG4gICAgICAgIHJldHVybiBzdW0gKyBNYXRoLmFicyh0cmFuc2FjdGlvbi5hbW91bnQpO1xyXG4gICAgICB9LCAwKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uYnVkZ2V0LFxyXG4gICAgICAgIHNwZW50LFxyXG4gICAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IGJ1ZGdldC50cmFuc2FjdGlvbnMubGVuZ3RoLFxyXG4gICAgICAgIC8vIFJlbW92ZSB0cmFuc2FjdGlvbnMgZnJvbSB0aGUgcmVzcG9uc2UgdG8ga2VlcCBpdCBjbGVhblxyXG4gICAgICAgIHRyYW5zYWN0aW9uczogdW5kZWZpbmVkXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gYnVkZ2V0c1dpdGhTcGVudDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ1ZGdldHM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgYSBzcGVjaWZpYyBidWRnZXQgd2l0aCBpdHMgdHJhbnNhY3Rpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCdWRnZXRXaXRoVHJhbnNhY3Rpb25zKHVzZXJJZCwgYnVkZ2V0SWQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYnVkZ2V0ID0gYXdhaXQgcHJpc21hLmJ1ZGdldC5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZTogeyBcclxuICAgICAgICBpZDogYnVkZ2V0SWQsXHJcbiAgICAgICAgdXNlcklkIFxyXG4gICAgICB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgdHJhbnNhY3Rpb25zOiB7XHJcbiAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIWJ1ZGdldCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgc3BlbnQgYW1vdW50XHJcbiAgICBjb25zdCBzcGVudCA9IGJ1ZGdldC50cmFuc2FjdGlvbnNcclxuICAgICAgLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gJ2V4cGVuc2UnKVxyXG4gICAgICAucmVkdWNlKChzdW0sIHRyYW5zYWN0aW9uKSA9PiBzdW0gKyBNYXRoLmFicyh0cmFuc2FjdGlvbi5hbW91bnQpLCAwKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5idWRnZXQsXHJcbiAgICAgIHNwZW50LFxyXG4gICAgICB0cmFuc2FjdGlvbkNvdW50OiBidWRnZXQudHJhbnNhY3Rpb25zLmxlbmd0aFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBidWRnZXQgd2l0aCB0cmFuc2FjdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBZGQgdHJhbnNhY3Rpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFRyYW5zYWN0aW9uKHVzZXJJZCwgdHJhbnNhY3Rpb25EYXRhKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEV4dHJhY3Qgb25seSB0aGUgZmllbGRzIHRoYXQgZXhpc3QgaW4gdGhlIGRhdGFiYXNlIHNjaGVtYVxyXG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgY2F0ZWdvcnksIGFtb3VudCwgZGF0ZSwgdHlwZSwgYnVkZ2V0SWQgfSA9IHRyYW5zYWN0aW9uRGF0YTtcclxuICAgIFxyXG4gICAgLy8gRmluZCBidWRnZXQgYnkgY2F0ZWdvcnkgaWYgYnVkZ2V0SWQgaXMgbm90IHByb3ZpZGVkIGJ1dCBjYXRlZ29yeSBtYXRjaGVzXHJcbiAgICBsZXQgZmluYWxCdWRnZXRJZCA9IGJ1ZGdldElkO1xyXG4gICAgaWYgKCFmaW5hbEJ1ZGdldElkICYmIHR5cGUgPT09ICdleHBlbnNlJykge1xyXG4gICAgICBjb25zdCBidWRnZXQgPSBhd2FpdCBwcmlzbWEuYnVkZ2V0LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgIGNhdGVnb3J5XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgZmluYWxCdWRnZXRJZCA9IGJ1ZGdldD8uaWQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICBjYXRlZ29yeSxcclxuICAgICAgICBhbW91bnQsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBkYXRlOiBuZXcgRGF0ZShkYXRlKSxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYnVkZ2V0SWQ6IGZpbmFsQnVkZ2V0SWRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIGJ1ZGdldCBzcGVudCBhbW91bnQgaWYgdGhpcyBpcyBhbiBleHBlbnNlIHdpdGggYSBidWRnZXRcclxuICAgIGlmICh0eXBlID09PSAnZXhwZW5zZScgJiYgZmluYWxCdWRnZXRJZCkge1xyXG4gICAgICBhd2FpdCB1cGRhdGVCdWRnZXRTcGVudChmaW5hbEJ1ZGdldElkKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJhbnNhY3Rpb247XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyB0cmFuc2FjdGlvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEFkZCBidWRnZXRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEJ1ZGdldCh1c2VySWQsIGJ1ZGdldERhdGEpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYnVkZ2V0ID0gYXdhaXQgcHJpc21hLmJ1ZGdldC5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgLi4uYnVkZ2V0RGF0YSxcclxuICAgICAgICB1c2VySWRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGJ1ZGdldDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGJ1ZGdldDonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIFVwZGF0ZSBidWRnZXRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJ1ZGdldChidWRnZXRJZCwgYnVkZ2V0RGF0YSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBidWRnZXQgPSBhd2FpdCBwcmlzbWEuYnVkZ2V0LnVwZGF0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiBidWRnZXRJZCB9LFxyXG4gICAgICBkYXRhOiBidWRnZXREYXRhXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gYnVkZ2V0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBidWRnZXQ6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBVcGRhdGUgdHJhbnNhY3Rpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uSWQsIHRyYW5zYWN0aW9uRGF0YSkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uIHRvIGNoZWNrIGlmIGJ1ZGdldCBjaGFuZ2VkXHJcbiAgICBjb25zdCBvcmlnaW5hbFRyYW5zYWN0aW9uID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdHJhbnNhY3Rpb25JZCB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi51cGRhdGUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdHJhbnNhY3Rpb25JZCB9LFxyXG4gICAgICBkYXRhOiB0cmFuc2FjdGlvbkRhdGFcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBidWRnZXQgc3BlbnQgYW1vdW50cyBmb3IgYWZmZWN0ZWQgYnVkZ2V0c1xyXG4gICAgaWYgKG9yaWdpbmFsVHJhbnNhY3Rpb24/LmJ1ZGdldElkICYmIG9yaWdpbmFsVHJhbnNhY3Rpb24udHlwZSA9PT0gJ2V4cGVuc2UnKSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZUJ1ZGdldFNwZW50KG9yaWdpbmFsVHJhbnNhY3Rpb24uYnVkZ2V0SWQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAodHJhbnNhY3Rpb24uYnVkZ2V0SWQgJiYgdHJhbnNhY3Rpb24udHlwZSA9PT0gJ2V4cGVuc2UnICYmIFxyXG4gICAgICAgIHRyYW5zYWN0aW9uLmJ1ZGdldElkICE9PSBvcmlnaW5hbFRyYW5zYWN0aW9uPy5idWRnZXRJZCkge1xyXG4gICAgICBhd2FpdCB1cGRhdGVCdWRnZXRTcGVudCh0cmFuc2FjdGlvbi5idWRnZXRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0cmFuc2FjdGlvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIERlbGV0ZSB0cmFuc2FjdGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25JZCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgdGhlIHRyYW5zYWN0aW9uIGJlZm9yZSBkZWxldGluZyB0byB1cGRhdGUgYnVkZ2V0XHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHRyYW5zYWN0aW9uSWQgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLmRlbGV0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB0cmFuc2FjdGlvbklkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBidWRnZXQgc3BlbnQgYW1vdW50IGlmIHRoaXMgd2FzIGFuIGV4cGVuc2Ugd2l0aCBhIGJ1ZGdldFxyXG4gICAgaWYgKHRyYW5zYWN0aW9uPy5idWRnZXRJZCAmJiB0cmFuc2FjdGlvbi50eXBlID09PSAnZXhwZW5zZScpIHtcclxuICAgICAgYXdhaXQgdXBkYXRlQnVkZ2V0U3BlbnQodHJhbnNhY3Rpb24uYnVkZ2V0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyB0cmFuc2FjdGlvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIERlbGV0ZSBidWRnZXRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUJ1ZGdldChidWRnZXRJZCkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBwcmlzbWEuYnVkZ2V0LmRlbGV0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiBidWRnZXRJZCB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYnVkZ2V0OicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVXBkYXRlIGJ1ZGdldCBzcGVudCBhbW91bnRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJ1ZGdldFNwZW50KGJ1ZGdldElkKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBzcGVudCBmb3IgdGhpcyBidWRnZXQgZnJvbSB0cmFuc2FjdGlvbnNcclxuICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgYnVkZ2V0SWQ6IGJ1ZGdldElkLFxyXG4gICAgICAgIHR5cGU6ICdleHBlbnNlJ1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB0b3RhbFNwZW50ID0gdHJhbnNhY3Rpb25zLnJlZHVjZSgoc3VtLCB0cmFuc2FjdGlvbikgPT4ge1xyXG4gICAgICByZXR1cm4gc3VtICsgTWF0aC5hYnModHJhbnNhY3Rpb24uYW1vdW50KTtcclxuICAgIH0sIDApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgYnVkZ2V0IHdpdGggdGhlIGNhbGN1bGF0ZWQgc3BlbnQgYW1vdW50XHJcbiAgICBjb25zdCBidWRnZXQgPSBhd2FpdCBwcmlzbWEuYnVkZ2V0LnVwZGF0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiBidWRnZXRJZCB9LFxyXG4gICAgICBkYXRhOiB7IHNwZW50OiB0b3RhbFNwZW50IH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBidWRnZXQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGJ1ZGdldCBzcGVudDonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIFVwZGF0ZSB1c2VyIHByb2ZpbGVcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcm9maWxlKHVzZXJJZCwgcHJvZmlsZURhdGEpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGVEYXRhLm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHByb2ZpbGVEYXRhLmVtYWlsLFxyXG4gICAgICAgIGF2YXRhcjogcHJvZmlsZURhdGEuYXZhdGFyLFxyXG4gICAgICAgIC8vIE5vdGU6IHBob25lIGlzIG5vdCBpbiB0aGUgVXNlciBtb2RlbCwgeW91IG1pZ2h0IG5lZWQgdG8gYWRkIGl0IHRvIHRoZSBzY2hlbWFcclxuICAgICAgICAvLyBvciBoYW5kbGUgaXQgZGlmZmVyZW50bHlcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiYmNyeXB0IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiLCJERU1PX0NSRURFTlRJQUxTIiwiZW1haWwiLCJwYXNzd29yZCIsIm5hbWUiLCJERU1PX1RSQU5TQUNUSU9OUyIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJ0eXBlIiwiZGF0ZSIsIkRhdGUiLCJERU1PX0JVREdFVFMiLCJidWRnZXQiLCJzcGVudCIsImljb24iLCJjb2xvciIsImNyZWF0ZU9yR2V0RGVtb1VzZXIiLCJkZW1vVXNlciIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJjcmVhdGUiLCJkYXRhIiwiaXNEZW1vIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwic2VlZERlbW9EYXRhIiwiZXhpc3RpbmdUcmFuc2FjdGlvbnMiLCJ0cmFuc2FjdGlvbiIsImNvdW50IiwidXNlcklkIiwiaWQiLCJleGlzdGluZ0J1ZGdldHMiLCJjcmVhdGVNYW55IiwibWFwIiwicmVzZXREZW1vRGF0YSIsImRlbGV0ZU1hbnkiLCJhdXRoZW50aWNhdGVVc2VyIiwiaXNWYWxpZFBhc3N3b3JkIiwiY29tcGFyZSIsIl8iLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwiY3JlYXRlVXNlciIsImdldFVzZXJCeUlkIiwic2VsZWN0IiwiYXZhdGFyIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiZ2V0VXNlclRyYW5zYWN0aW9ucyIsImJ1ZGdldElkIiwid2hlcmVDbGF1c2UiLCJ0cmFuc2FjdGlvbnMiLCJmaW5kTWFueSIsImluY2x1ZGUiLCJvcmRlckJ5IiwiZ2V0VXNlckJ1ZGdldHMiLCJidWRnZXRzIiwiYnVkZ2V0c1dpdGhTcGVudCIsInJlZHVjZSIsInN1bSIsIk1hdGgiLCJhYnMiLCJ0cmFuc2FjdGlvbkNvdW50IiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZ2V0QnVkZ2V0V2l0aFRyYW5zYWN0aW9ucyIsImZpbmRGaXJzdCIsImZpbHRlciIsInQiLCJhZGRUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uRGF0YSIsImZpbmFsQnVkZ2V0SWQiLCJ1cGRhdGVCdWRnZXRTcGVudCIsImFkZEJ1ZGdldCIsImJ1ZGdldERhdGEiLCJ1cGRhdGVCdWRnZXQiLCJ1cGRhdGUiLCJ1cGRhdGVUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uSWQiLCJvcmlnaW5hbFRyYW5zYWN0aW9uIiwiZGVsZXRlVHJhbnNhY3Rpb24iLCJkZWxldGUiLCJkZWxldGVCdWRnZXQiLCJ0b3RhbFNwZW50IiwidXBkYXRlVXNlclByb2ZpbGUiLCJwcm9maWxlRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftransactions%2Froute&page=%2Fapi%2Ftransactions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftransactions%2Froute.js&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5Csmart_project2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();