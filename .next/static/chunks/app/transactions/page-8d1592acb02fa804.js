(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{2345:function(e,s,a){Promise.resolve().then(a.bind(a,6647))},6647:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(7437),l=a(2265),n=a(9376),i=a(2037),r=a(9178),c=a(4226),d=a(8068),o=a(7233),x=a(9891),m=a(56),h=a(8251);let u=["All Categories","Food & Dining","Transportation","Entertainment","Shopping","Health & Fitness","Education","Income","Utilities","Travel","Other"];function g(){let{formatCurrency:e}=(0,m.r)(),{transactions:s,deleteTransaction:a,deleteMultipleTransactions:g,updateTransaction:j,addTransaction:p,loading:N,loadTransactionsByBudget:b,refreshTransactions:v}=(0,h.n)(),f=(0,n.useSearchParams)(),y=(0,n.useRouter)(),[w,C]=(0,l.useState)(""),[k,D]=(0,l.useState)("All Categories"),[O,S]=(0,l.useState)(null),[T,A]=(0,l.useState)(null),[Z,L]=(0,l.useState)("all"),[M,E]=(0,l.useState)({min:"",max:""}),[z,I]=(0,l.useState)("date"),[F,_]=(0,l.useState)("desc"),[B,H]=(0,l.useState)([]),[P,R]=(0,l.useState)(!1),[U,Y]=(0,l.useState)();(0,l.useEffect)(()=>{let e=f.get("budgetId"),s=f.get("category");e?(S(e),A(s),s&&D(s),b(e)):v()},[f,b,v]);let q=(0,l.useMemo)(()=>{let e=s.filter(e=>{let s=""===w||e.description.toLowerCase().includes(w.toLowerCase())||e.merchant.toLowerCase().includes(w.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(w.toLowerCase())),a="All Categories"===k||e.category===k,t=new Date(e.date),l=new Date,n=!0;"today"===Z?n=t.toDateString()===l.toDateString():"week"===Z?n=t>=new Date(l.getTime()-6048e5):"month"===Z&&(n=t>=new Date(l.getTime()-2592e6));let i=(""===M.min||Math.abs(e.amount)>=parseFloat(M.min))&&(""===M.max||Math.abs(e.amount)<=parseFloat(M.max));return s&&a&&n&&i});return e.sort((e,s)=>{let a=0;switch(z){case"date":a=new Date(e.date).getTime()-new Date(s.date).getTime();break;case"amount":a=Math.abs(e.amount)-Math.abs(s.amount);break;case"description":a=e.description.localeCompare(s.description);break;case"category":a=e.category.localeCompare(s.category)}return"asc"===F?a:-a}),e},[s,w,k,Z,M,z,F]),G=e=>{H(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},J=e=>{Y(e),R(!0)},K=q.filter(e=>e.amount>0).reduce((e,s)=>e+s.amount,0),Q=q.filter(e=>e.amount<0).reduce((e,s)=>e+Math.abs(s.amount),0);return N?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(i.Z,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.O,{className:"h-8 w-48 mb-2"}),(0,t.jsx)(o.O,{className:"h-4 w-96"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[(0,t.jsx)(o.O,{className:"h-10 w-32"}),(0,t.jsx)(o.O,{className:"h-10 w-40"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(r.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o.O,{className:"w-10 h-10 rounded-lg"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)(o.O,{className:"h-4 w-24 mb-2"}),(0,t.jsx)(o.O,{className:"h-6 w-20"})]})]})},s))}),(0,t.jsx)(r.Zb,{className:"p-6 mb-8",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(o.O,{className:"h-10 w-full"},s))})}),(0,t.jsx)(r.Zb,{className:"p-6",children:(0,t.jsx)("div",{className:"space-y-4",children:[...Array(8)].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(o.O,{className:"w-4 h-4"}),(0,t.jsx)(o.O,{className:"w-10 h-10 rounded-lg"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.O,{className:"h-4 w-32 mb-2"}),(0,t.jsx)(o.O,{className:"h-3 w-48"})]})]}),(0,t.jsx)(o.O,{className:"h-4 w-20"})]},s))})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(i.Z,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:O?"".concat(T," Budget Transactions"):"Transactions"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:O?"Manage transactions for your ".concat(T," budget"):"Search, filter, and manage your financial transactions"}),O&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{y.push("/transactions"),S(null),A(null),D("All Categories")},children:[(0,t.jsx)("i",{className:"ri-arrow-left-line mr-2","aria-hidden":"true"}),"Back to All Transactions"]})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[B.length>0&&(0,t.jsxs)(c.z,{variant:"danger",onClick:()=>{B.length>0&&(g(B),H([]))},children:[(0,t.jsx)("i",{className:"ri-delete-bin-line mr-2","aria-hidden":"true"}),"Delete (",B.length,")"]}),(0,t.jsxs)(c.z,{onClick:()=>R(!0),children:[(0,t.jsx)("i",{className:"ri-add-line mr-2","aria-hidden":"true"}),"Add Transaction"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)(r.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"ri-exchange-line text-blue-600 text-lg","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Transactions"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:q.length})]})]})}),(0,t.jsx)(r.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"ri-arrow-up-line text-green-600 text-lg","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Income"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e(K)})]})]})}),(0,t.jsx)(r.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:"ri-arrow-down-line text-red-600 text-lg","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e(Q)})]})]})})]}),(0,t.jsxs)(r.Zb,{className:"p-6 mb-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(d.I,{placeholder:"Search transactions...",value:w,onChange:e=>C(e.target.value),className:"w-full"})}),(0,t.jsx)("div",{children:(0,t.jsx)("select",{value:k,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:u.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{value:Z,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"All Time"}),(0,t.jsx)("option",{value:"today",children:"Today"}),(0,t.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,t.jsx)("option",{value:"month",children:"Last 30 Days"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{value:"".concat(z,"-").concat(F),onChange:e=>{let[s,a]=e.target.value.split("-");I(s),_(a)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"date-desc",children:"Date (Newest)"}),(0,t.jsx)("option",{value:"date-asc",children:"Date (Oldest)"}),(0,t.jsx)("option",{value:"amount-desc",children:"Amount (Highest)"}),(0,t.jsx)("option",{value:"amount-asc",children:"Amount (Lowest)"}),(0,t.jsx)("option",{value:"description-asc",children:"Description (A-Z)"}),(0,t.jsx)("option",{value:"description-desc",children:"Description (Z-A)"})]})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Amount Range:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.I,{type:"number",placeholder:"Min",value:M.min,onChange:e=>E(s=>({...s,min:e.target.value})),className:"w-24"}),(0,t.jsx)("span",{className:"text-gray-400",children:"-"}),(0,t.jsx)(d.I,{type:"number",placeholder:"Max",value:M.max,onChange:e=>E(s=>({...s,max:e.target.value})),className:"w-24"})]}),(0,t.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>{C(""),D("All Categories"),L("all"),E({min:"",max:""}),I("date"),_("desc")},children:"Clear Filters"})]})]}),(0,t.jsxs)(r.Zb,{className:"p-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:B.length===q.length&&q.length>0,onChange:()=>{B.length===q.length?H([]):H(q.map(e=>e.id))},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Transactions (",q.length,")"]})]})}),0===q.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("i",{className:"ri-search-line text-2xl text-gray-400","aria-hidden":"true"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search criteria or filters."}),(0,t.jsxs)(c.z,{onClick:()=>R(!0),children:[(0,t.jsx)("i",{className:"ri-add-line mr-2","aria-hidden":"true"}),"Add Your First Transaction"]})]}):(0,t.jsx)("div",{className:"space-y-2",children:q.map(s=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg transition-colors ".concat(B.includes(s.id)?"bg-blue-50 border border-blue-200":""),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:B.includes(s.id),onChange:()=>G(s.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(s.color),children:(0,t.jsx)("i",{className:"".concat(s.icon," text-lg"),"aria-hidden":"true"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:s.description}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,t.jsx)("span",{children:s.category}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:s.merchant}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:new Date(s.date).toLocaleDateString()})]}),s.tags.length>0&&(0,t.jsx)("div",{className:"flex items-center space-x-1 mt-1",children:s.tags.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("p",{className:"font-semibold text-lg ".concat(s.amount>0?"text-green-600":"text-red-600"),children:[s.amount>0?"+":"",e(Math.abs(s.amount))]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("button",{onClick:()=>J(s),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors","aria-label":"Edit transaction",children:(0,t.jsx)("i",{className:"ri-edit-line","aria-hidden":"true"})}),(0,t.jsx)("button",{onClick:()=>a(s.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors","aria-label":"Delete transaction",children:(0,t.jsx)("i",{className:"ri-delete-bin-line","aria-hidden":"true"})})]})]})]},s.id))})]})]}),(0,t.jsx)(x.Z,{isOpen:P,onClose:()=>{R(!1),Y(void 0)},transaction:U,onSave:e=>{U?j(U.id,e):p(e),Y(void 0)},defaultBudgetId:O,defaultCategory:T})]})}},7233:function(e,s,a){"use strict";a.d(s,{O:function(){return n}});var t=a(7437),l=a(4508);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-gray-200",s),...a})}}},function(e){e.O(0,[859,137,648,56,214,37,971,117,744],function(){return e(e.s=2345)}),_N_E=e.O()}]);